webpackJsonp([6],{"1+xm":function(t,e){},EhpF:function(t,e){},FUQg:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("sz1i"),a={name:"tableChange",props:{table_list:{type:Array,default:""}},data:function(){return{}},methods:{view_secret:function(t){this.$emit("view_secret",t)}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"tableChange"}},[s("div",{staticClass:"table"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.table_list,function(e,i){return s("li",{key:i,staticClass:"list_info"},[s("p",{staticClass:"time"},[t._v(t._s(t._f("formatDateYearTime")(e.addtime)))]),t._v(" "),s("p",{staticClass:"type"},[t._v(t._s(e.card_name))]),t._v(" "),s("p",{staticClass:"count"},[t._v(t._s(t._f("changeBigNum")(e.num)))]),t._v(" "),s("p",{staticClass:"operation",on:{click:function(s){return t.view_secret(e)}}},[t._v("查看卡密")])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head_top"},[e("p",[this._v("兑换时间")]),this._v(" "),e("p",[this._v("卡类型")]),this._v(" "),e("p",[this._v("兑换数量")]),this._v(" "),e("p",[this._v("操作")])])}]};var c=s("VU/8")(a,r,!1,function(t){s("EhpF")},"data-v-747949db",null).exports,n={name:"pointCard",props:{card_list:{type:Array,default:""},check_boolear:{type:Boolean,default:!1}},data:function(){return{}},methods:{all_check:function(){this.$emit("all_check")},check:function(t){this.$emit("check",t)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"pointCard"}},[i("div",{staticClass:"table"},[i("div",{staticClass:"head_top"},[i("div",{on:{click:function(e){return t.all_check()}}},[t.check_boolear?t._e():i("img",{attrs:{src:s("ZMt4"),alt:""}}),t._v(" "),t.check_boolear?i("img",{attrs:{src:s("hkgi"),alt:""}}):t._e(),t._v(" "),i("span",[t._v("全选")])]),t._v(" "),i("p",[t._v("卡密")]),t._v(" "),i("p",[t._v("卡类型")]),t._v(" "),i("p",[t._v("卡状态")]),t._v(" "),i("p",[t._v("点数")])]),t._v(" "),i("ul",{staticClass:"list"},t._l(t.card_list,function(e,a){return i("li",{key:a,staticClass:"list_info"},[i("div",{staticClass:"img_click",on:{click:function(e){return t.check(a)}}},[e.check?t._e():i("img",{attrs:{src:s("ZMt4"),alt:""}}),t._v(" "),e.check?i("img",{attrs:{src:s("hkgi"),alt:""}}):t._e()]),t._v(" "),i("p",{staticClass:"secret"},[t._v(t._s(e.card_password))]),t._v(" "),i("p",{staticClass:"type"},[t._v(t._s(e.name))]),t._v(" "),i("p",{staticClass:"status"},[t._v(t._s(0==e.isuse?"已使用":"正常"))]),t._v(" "),i("p",{staticClass:"count"},[t._v(t._s(t._f("changeBigNum")(e.cash)))])])}),0)])])},staticRenderFns:[]};var _=s("VU/8")(n,l,!1,function(t){s("Q+l0")},"data-v-2e1204b2",null).exports,o={name:"exchangeRecords",components:{headBar:i.a,tableChange:c,pointCard:_},data:function(){return{boolear:!1,time_list:[{title:"7天"},{title:"30天"},{title:"半年"},{title:"一年"}],current_index:0,currentIndex:0,firstRow:0,first_row:0,fetchNum:5,page:1,total:0,pages:1,totals:0,table_list:[],card_list:[],dialogVisible:!1,card_name:"",num:"",addtime:"",check_boolear:!1,secret_list:[],copy_list:[]}},created:function(){this.get_exchange_list(),this.get_card_list()},methods:{changePage:function(t){this.page=t,this.firstRow=this.fetchNum*(t-1),this.get_exchange_list()},changeIndex:function(t){this.current_index=t,this.firstRow=0,this.page=1,this.get_exchange_list()},get_exchange_list:function(){var t=this;this.$Api({api_name:"kkl.user.userGiftList",firstRow:this.firstRow,fetchNum:this.fetchNum,type:this.current_index+1},function(e,s){e?t.$msg(e.error_msg,"error",1500):(t.table_list=s.data.user_gift_list,t.total=Number(s.data.total))})},change_index:function(t){this.currentIndex=t,this.first_row=0,this.pages=1,this.get_card_list()},all_check:function(){var t=this;this.check_boolear=!this.check_boolear,this.copy_list=[],1==this.check_boolear?this.card_list.map(function(e,s){e.check=!0,t.copy_list.push(e.card_password)}):this.card_list.map(function(t,e){t.check=!1})},check:function(t){var e=this.card_list[t].check,s=this.card_list[t].card_password;1==e?(this.card_list[t].check=!1,this.copy_list.splice(t,1)):(this.card_list[t].check=!0,this.copy_list.push(s))},change_page:function(t){this.pages=t,this.first_row=this.fetchNum*(t-1),this.get_card_list()},get_card_list:function(){var t=this;this.$Api({api_name:"kkl.user.myGiftList",firstRow:this.first_row,fetchNum:this.fetchNum,type:this.currentIndex+1},function(e,s){e?t.$msg(e.error_msg,"error",1500):(t.card_list=s.data.user_gift_list,s.data.user_gift_list.map(function(e,s){t.$set(t.card_list[s],"check",!1)}),t.totals=Number(s.data.total))})},view_secret:function(t){var e=this;this.$Api({api_name:"kkl.user.giftPasswordInfo",user_gift_id:t.user_gift_id},function(t,s){t?e.$msg(t.error_msg,"error",1500):(e.card_name=s.data.card_name,e.num=s.data.number,e.addtime=s.data.addtime,e.secret_list=s.data.card_password,e.dialogVisible=!0)})},onCopy:function(){this.dialogVisible=!1,this.$msg("复制成功","success",1500)},onError:function(){this.$msg("复制失败","error",1500)}},watch:{card_list:{handler:function(t){var e=0;t.map(function(t){1==t.check&&e++}),e==t.length&&0!=t.length?this.check_boolear=!0:this.check_boolear=!1},deep:!0}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"exchangeRecords"}},[s("headBar",{attrs:{head_title:"兑奖记录"}}),t._v(" "),s("div",{staticClass:"form_list"},[t._m(0),t._v(" "),s("ul",{staticClass:"tab_nav_first"},t._l(t.time_list,function(e,i){return s("li",{key:i,class:{active:t.current_index==i},on:{click:function(e){return t.changeIndex(i)}}},[t._v(t._s(e.title))])}),0),t._v(" "),s("tableChange",{attrs:{table_list:t.table_list},on:{view_secret:t.view_secret}}),t._v(" "),0!=t.total?s("div",{staticClass:"paging_box"},[s("el-pagination",{attrs:{"page-size":5,"current-page":t.page,layout:"prev, pager, next",total:t.total,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":t.changePage}})],1):t._e(),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"tab_info"},[s("ul",{staticClass:"tab_nav"},t._l(t.time_list,function(e,i){return s("li",{key:i,class:{active:t.currentIndex==i},on:{click:function(e){return t.change_index(i)}}},[t._v(t._s(e.title))])}),0),t._v(" "),s("p",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copy_list,expression:"copy_list",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v("复制选择的卡密")])]),t._v(" "),s("pointCard",{attrs:{card_list:t.card_list,check_boolear:t.check_boolear},on:{all_check:function(e){return t.all_check()},check:t.check}}),t._v(" "),0!=t.totals?s("div",{staticClass:"paging_box"},[s("el-pagination",{attrs:{"page-size":5,"current-page":t.pages,layout:"prev, pager, next",total:t.totals,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":t.change_page}})],1):t._e()],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible,width:"460px","show-close":t.boolear},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"alert"},[s("p",{staticClass:"title"},[t._v(t._s(t.card_name)+" "+t._s(t.num)+"张")]),t._v(" "),s("p",{staticClass:"time"},[t._v("生成时间："+t._s(t._f("formatDateYearTime")(t.addtime)))]),t._v(" "),s("div",{staticClass:"card_secret"},t._l(t.secret_list,function(e,i){return s("div",{key:i},[t._v(t._s(e))])}),0),t._v(" "),s("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.secret_list,expression:"secret_list",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"btn"},[t._v("复制")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[this._v("兑换记录："),e("span",[this._v("可筛选时间查看")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[this._v("我的点卡："),e("span",[this._v("可筛选时间查看")])])}]};var d=s("VU/8")(o,h,!1,function(t){s("1+xm")},"data-v-3119cce8",null);e.default=d.exports},"Q+l0":function(t,e){}});