webpackJsonp([7],{"6NOd":function(t,e){},NyEU:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("NYxO"),r=s("xzuO"),o=s("sz1i"),c={name:"getPacket",props:{list:{type:Array,default:""}},data:function(){return{}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"getPacket"}},[s("div",{staticClass:"table"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.list,function(e,a){return s("li",{key:a,staticClass:"list_info"},[s("p",{staticClass:"title ellipsis"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatDateYearTime")(e.addtime)))]),t._v(" "),s("p",{staticClass:"number"},[t._v(t._s(e.money))]),t._v(" "),s("p",{staticClass:"type ellipsis"},[t._v(t._s(1==e.type?"普通红包":"手气红包"))]),t._v(" "),s("p",{staticClass:"username ellipsis"},[t._v(t._s(e.nickname))])])}),0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"head_top"},[s("p",[t._v("红包标题")]),t._v(" "),s("p",[t._v("抢得时间")]),t._v(" "),s("p",[t._v("金额")]),t._v(" "),s("p",[t._v("红包类型")]),t._v(" "),s("p",[t._v("发起人")])])}]};var _=s("VU/8")(c,l,!1,function(t){s("VadE")},"data-v-3dd40e66",null).exports,u={name:"sendPacket",props:{send_list:{type:Array,default:""}},data:function(){return{}},methods:{copy:function(t){this.$emit("copy",t)}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"sendPacket"}},[s("div",{staticClass:"table"},[t._m(0),t._v(" "),s("ul",{staticClass:"list"},t._l(t.send_list,function(e,a){return s("li",{key:a,staticClass:"list_info"},[s("p",{staticClass:"title ellipsis_more"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"receiveCollar"},[t._v(t._s(e.residue_money)+"/"+t._s(e.total_money))]),t._v(" "),s("p",{staticClass:"receiveNumber"},[t._v(t._s(e.residue_num)+"/"+t._s(e.num))]),t._v(" "),s("p",{staticClass:"type"},[t._v(t._s(1==e.type?"普通红包":"手气红包"))]),t._v(" "),s("p",{staticClass:"voidTime"},[t._v(t._s(t._f("formatDateYearTime")(e.expire_time)))]),t._v(" "),s("p",{staticClass:"createTime"},[t._v(t._s(t._f("formatDateYearTime")(e.addtime)))]),t._v(" "),s("p",{staticClass:"operation"},[s("span",{staticClass:"copy",on:{click:function(s){return t.copy(e.jiami_red_packet_id)}}},[t._v("复制链接")])])])}),0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"head_top"},[s("p",[t._v("红包标题")]),t._v(" "),s("p",[t._v("已领额")]),t._v(" "),s("p",[t._v("已领数")]),t._v(" "),s("p",[t._v("红包类型")]),t._v(" "),s("p",[t._v("作废时间")]),t._v(" "),s("p",[t._v("生成时间")]),t._v(" "),s("p",[t._v("操作")])])}]};var d=s("VU/8")(u,v,!1,function(t){s("WaSn")},"data-v-0f2119ea",null).exports,p={name:"myPacket",components:{headBar:o.a,getPacket:_,sendPacket:d},computed:i()({},Object(n.c)(["haveLogin","userInfo"])),data:function(){return{money:"",count:"",code:"",title:"",time_list:[{title:"发起红包"},{title:"收到的红包"},{title:"发起的红包"}],type_list:[{title:"普通红包"},{title:"手气红包"}],current_index:0,currentIndex:0,list:[],send_list:[],firstRow:0,fetchNum:10,fetch_num:15,total:0,totals:0,page:1,sendAuthCode:!1,auth_time:0}},methods:i()({changeIndex:function(t){this.current_index=t,1==t?this.get_receive_list():2==t&&this.get_send_list()},change_index:function(t){this.currentIndex=t},changePage:function(t){this.page=t,this.firstRow=this.fetch_num*(t-1),this.get_receive_list()},change_page:function(t){this.page=t,this.firstRow=this.fetchNum*(t-1),this.get_send_list()},get_receive_list:function(){var t=this;this.$Api({api_name:"kkl.user.packetLogList",firstRow:this.firstRow,fetchNum:this.fetch_num},function(e,s){e?t.$msg(e.error_msg,"error",1500):(t.list=s.data.red_packet_log_list,t.total=Number(s.data.total))})},get_send_list:function(){var t=this;this.$Api({api_name:"kkl.user.redPacketList",firstRow:this.firstRow,fetchNum:this.fetchNum},function(e,s){e?t.$msg(e.error_msg,"error",1500):(t.send_list=s.data.red_packet_list,t.totals=Number(s.data.total))})},get_verify:function(){var t=this;this.$Api({api_name:"kkl.user.sendVerifyCode",mobile:this.userInfo.mobile},function(e,s){if(e)t.$msg(e.error_msg,"error",1500);else{t.$msg(s.data,"success",1500),t.sendAuthCode=!0,t.auth_time=60;var a=setInterval(function(){t.auth_time--,t.auth_time<=0&&(t.sendAuthCode=!1,clearInterval(a))},1e3)}})},produce:function(){var t=this,e=[{reg:"noData",val:this.money,errMsg:"金额不能为空"},{reg:"noData",val:this.count,errMsg:"数量不能为空"},{reg:"noData",val:this.code,errMsg:"短信验证码不能为空"},{reg:"noData",val:this.title,errMsg:"标题不能为空"}];Object(r.a)(e).result?this.$Api({api_name:"kkl.user.sendRedPacket",type:this.currentIndex+1,total_money:this.money,num:this.count,code:this.code,title:this.title},function(e,s){e?t.$msg(e.error_msg,"error",1500):(t.count="",t.money="",t.code="",t.title="",t.$msg(s.data,"success",1500),t.$Api({api_name:"kkl.user.getUserInfo"},function(s,a){s?t.$msg(e.error_msg,"error",1500):t.setUser(a.data)}))}):this.$msg(Object(r.a)(e),"error",1500)},cancle:function(t){var e=this;this.$Api({api_name:"kkl.user.cancelRedPacket",red_packet_id:t},function(t,s){t?e.$msg(t.error_msg,"error",1500):(e.$msg(s.data,"success",1500),e.get_send_list(),e.$Api({api_name:"kkl.user.getUserInfo"},function(s,a){s?e.$msg(t.error_msg,"error",1500):e.setUser(a.data)}))})},copy:function(t){var e=window.location.host+"/#/index?jiami_id="+t,s=this;this.$copyText(e).then(function(t){s.$msg("复制成功","success",1500)},function(t){s.$msg("复制失败","error",1500)})}},Object(n.d)({setUser:"SET_USER",delUser:"DEL_USER"}))},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"myPacket"}},[a("headBar",{attrs:{head_title:"我的红包",head_pro:"发起红包,收获红包查询"}}),t._v(" "),a("div",{staticClass:"form_list"},[a("ul",{staticClass:"tab_nav"},t._l(t.time_list,function(e,s){return a("li",{key:s,class:{active:t.current_index==s},on:{click:function(e){return t.changeIndex(s)}}},[t._v(t._s(e.title))])}),0),t._v(" "),0==t.current_index?a("div",{staticClass:"lanch_packet"},[a("div",{staticClass:"boolear"},[a("p",{staticClass:"title_boolear"},[t._v("当前银行余额：")]),t._v(" "),a("div",{staticClass:"content_boolear"},[t._v(t._s(t._f("changeBigNum")(t.userInfo.frozen_money)))])]),t._v(" "),a("div",{staticClass:"boolear"},[a("p",{staticClass:"title_boolear"},[t._v("选择红包类型：")]),t._v(" "),a("ul",{staticClass:"open_boolear"},t._l(t.type_list,function(e,i){return a("li",{key:i,on:{click:function(e){return t.change_index(i)}}},[t.currentIndex!=i?a("img",{attrs:{src:s("7BWj"),alt:""}}):t._e(),t._v(" "),t.currentIndex==i?a("img",{attrs:{src:s("+QoG"),alt:""}}):t._e(),t._v(" "),a("p",[t._v(t._s(e.title))])])}),0)]),t._v(" "),a("div",{staticClass:"boolear"},[a("p",{staticClass:"title_boolear"},[t._v("红包总金额：")]),t._v(" "),a("div",{staticClass:"money_box",class:{blank:""!=t.money}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],attrs:{type:"text"},domProps:{value:t.money},on:{input:function(e){e.target.composing||(t.money=e.target.value)}}}),t._v(" "),a("p",[t._v("金豆")])])]),t._v(" "),a("div",{staticClass:"boolear"},[a("p",{staticClass:"title_boolear"},[t._v("红包数量：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"input_text",class:{blank:""!=t.count},attrs:{type:"text"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"boolear"},[a("p",{staticClass:"title_boolear"},[t._v("短信验证码：")]),t._v(" "),a("div",{staticClass:"message_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],class:{blank:""!=t.code},attrs:{type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),t.sendAuthCode?t._e():a("div",{on:{click:function(e){return t.get_verify()}}},[t._v("获取验证码")]),t._v(" "),t.sendAuthCode?a("div",[t._v(t._s(t.auth_time)+"s后重新获取")]):t._e()])]),t._v(" "),a("div",{staticClass:"boolear"},[a("p",{staticClass:"title_boolear"},[t._v("红包标题：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input_text",class:{blank:""!=t.title},attrs:{type:"text",placeholder:"恭喜发财，大吉大利"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"confirm",on:{click:function(e){return t.produce()}}},[t._v("生成红包")])]):t._e(),t._v(" "),1==t.current_index?a("getPacket",{attrs:{list:t.list}}):t._e(),t._v(" "),2==t.current_index?a("sendPacket",{attrs:{send_list:t.send_list},on:{cancle:t.cancle,copy:t.copy}}):t._e(),t._v(" "),1==t.current_index&&0!=t.total?a("div",{staticClass:"paging_box"},[a("el-pagination",{attrs:{"page-size":15,"current-page":t.page,layout:"prev, pager, next",total:t.total,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":t.changePage}})],1):t._e(),t._v(" "),2==t.current_index&&0!=t.totals?a("div",{staticClass:"paging_box"},[a("el-pagination",{attrs:{"page-size":10,"current-page":t.page,layout:"prev, pager, next",total:t.totals,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":t.change_page}})],1):t._e()],1)],1)},staticRenderFns:[]};var f=s("VU/8")(p,m,!1,function(t){s("6NOd")},"data-v-660144a8",null);e.default=f.exports},VadE:function(t,e){},WaSn:function(t,e){}});