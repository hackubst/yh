/*! suning.com 2014-06-18 */
!function(a,b){function c(a){return"[object Object]"===Object.prototype.toString.call(a)}function d(a){return c(a)?a=Object.create(a):void 0}var e=window,f=b;a.require=function(a,b){return arguments.length>1?SUI.Use(a,b):f[a]},a.load={mod:{},opts:{baseUrl:"script/"},config:function(a){c(a)&&(this.opts=a)},define:function(a,b){this.mod[a]="function"==typeof b?b():b},require:function(a,b){var c,d=[],e=this;if(a.constructor===Array?a.forEach(function(a){d.push(a)}):a.constructor===String&&(d=a=[a]),!e.mod[a])for(var f=0,g=d.length;g>f;f++){var h=d[f].split("/");h=h[h.length-1];var i=c;i=document.createElement("script"),i.src=e.opts.baseUrl+d[f]+".js",i.type="text/javascript",document.querySelector("head").appendChild(i),i.onload=function(){b&&b.call(b,e.mod[h])}}}},a.exports=function(b,c){for(var d=b.split("."),e=a.pub={},f=0,g=d.length;g>f;f++)"undefined"==typeof e[d[f]]&&(e[d[f]]={}),f==g-1&&(e[d[f]]=c),e=e[d[f]]},a.Use=function(b,c,d){return arguments.length>2?a.UI[b](c,d):a.UI[b](c)},a.UI={},a=d(a),e.SUI=a}(window.SUI=window.SUI||{},{position:{getHeight:function(){var a=document.documentElement.offsetHeight||document.body.offsetHeight;return window.innerHeight>a&&(a=window.innerHeight),a},scrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop}},checkDevice:{isMobile:function(){return navigator.userAgent.match(/Win/i)||navigator.userAgent.match(/MacIntel/i)||navigator.userAgent.match(/Linux/i)?!1:!0}},remove:function(){return this.parentNode.removeChild(this)},tmpl2:function(a,b){var c="$"+ +new Date,d=function(a){var b,e=[c],f=[[]];for(b in a)e.push(b),f.push(a[b]);return new Function(e,d.$).apply(a,f).join("")};return d.$=d.$||c+".push('"+a.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join(c+".push('").split("\r").join("\\'")+"');return "+c,b?d(b):d},main:{selectBind:function(){$(".sn-show-optiton").each(function(){var a=$(this),b=a.next(".sn-show-option-box");a.click(function(){a.find(".show-option-view").toggleClass("showview"),b.toggle()}),b.find(".block").on("click",function(){$(this).addClass("sn-btn-c").removeClass("sn-btn-b").siblings().removeClass("sn-btn-c").addClass("sn-btn-b"),b.hide(),a.find(".show-option-view").removeClass("showview")})}),document.querySelectorAll(".sn-select")&&Array.prototype.slice.call(document.querySelectorAll(".sn-select")).forEach(function(a){a.querySelector("select")&&a.querySelector("select").addEventListener("change",function(){var b=this.selectedIndex;a.querySelector(".select-view").innerHTML=this.options[b].text||this.options[b].value},!1)})}}}),"function"==typeof jQuery&&!function(a){function b(){c&&clearTimeout(c),c=null,f={}}var c,d,e,f={};a(function(){a(document.body).on("touchstart",function(b){d=Date.now(),e=d-(f.last||d);var b=b.originalEvent;f.el=a(b.touches[0].target),e>0&&250>=e&&(f.isDoubleTap=!0),f.last=d}).on("touchmove",function(a){var a=a.originalEvent;b()}).on("touchend",function(){"last"in f&&(c=setTimeout(function(){f.el.trigger("tap"),f.isDoubleTap&&(f.el.trigger("doubleTap"),f={})},10))}).on("touchcancel",b)}),["doubleTap","tap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)}})}(jQuery),SUI.loadJs=function(){function a(a,i){var j,k;if(c(),a.src){a.src=a.src.constructor===Array?a.src:[a.src];for(var l=0;l<a.src.length;l++)a.src[l].constructor!==Array&&(a.src[l]=[a.src[l]]),h.push(a.src[l])}g=h.shift(),d=d||f.getElementsByTagName("head")[0],a.src=g;for(var l=0;l<a.src.length;l++)k=a.src[l],j=f.createElement("script"),j.src=k,j.type="text/javascript",e.ie?j.onreadystatechange=function(){var c=this.readyState;("loaded"===c||"complete"===c)&&(this.onreadystatechange=null,b(a,i))}:j.onload=j.onerror=function(){b(a,i)},d.appendChild(j)}function b(b,c){var d=g;if(d&&(d.shift(),!d.length)){if(!h.length)return void("function"==typeof c&&c());a(b,c)}}function c(){if(!e){var a=/msie/i.test(navigator.userAgent.toLowerCase());e={ie:a}}}var d,e,f=document,g=[],h=[];return{init:function(b,c){a(b,c)}}}(),SUI.UI.lazyload=function(a){if(document.querySelector(a)){var b=null;$(a).find("img").each(function(){var a=$(this)[0];a.offsetTop<window.innerHeight&&(a.src=a.getAttribute("data-src"),a.setAttribute("data-src","done"))}),window.addEventListener("scroll",function(){b=setTimeout(function(){$(a).find("img").each(function(){var a=$(this)[0];if(null!=a.getAttribute("data-src")){var c=a.offsetTop,d=window.innerHeight||window.screen.height;return window.pageYOffset>c+d||window.pageYOffset<c-d&&"done"!=a.getAttribute("data-src")?void clearTimeout(b):void(window.pageYOffset>c-d&&"done"!=a.getAttribute("data-src")&&(a.src=a.getAttribute("data-src"),a.setAttribute("data-src","done")))}})},300)},!1)}},function(){SUI.UI.init=function(){return{init:function(){SUI.require("main").selectBind()},hidebar:function(){}}.init()}}(),SUI.UI.HTMLTemplate=function(a){var b=a.para||{},c=[a.string].join("");if(b){for(var d in b){var e=new RegExp("\\$\\{"+d+"\\}","g");c=c.replace(e,b[d])}return c}return c},SUI.UI.AlertBox=function(a){function b(a){this.opts=a||{},this.title=this.opts.title||"",this.msg=this.opts.msg||"",this.confirmMsg=this.opts.confirmMsg||"确定",this.cancelMsg=this.opts.cancelMsg||"取消",this.type=this.opts.type||"default",this.hasMask=this.opts.hasMask===!1?!1:!0,this.uid=this.opts.uid||"#alertBox",this.confirm=this.opts.confirm||function(){},this.cancel=this.opts.cancel||function(){},this.callBack=this.opts.callBack||function(){},this._event=SUI.require("checkDevice").isMobile()?"tap":"click"}b.prototype={init:function(){var a=this;switch(a.type){case"default":var b='<div id="alertBox" class="alertBox"><div class="msg">${msg}</div><div class="layout wbox"><div class="btn-cancel sn-btn-b wbox-flex block mr10"><a href="javascript:void(0)"><span>'+this.cancelMsg+'</span></a></div><div class="btn-confirm sn-btn-c wbox-flex block"><a href="javascript:void(0)"><span>'+this.confirmMsg+"</span></a></div></div></div>";break;case"alert":var b='<div id="alertBox" class="alertBox"><div class="msg">${msg}</div><div class="layout wbox"><div class="btn-confirm sn-btn-c wbox-flex block"><a href="javascript:void(0)">'+this.confirmMsg+"</a></div></div></div>";break;case"mini":var b='<div id="alertBox" class="alertBox alertBoxBlack"><div class="msg">${msg}</div></div>';break;case"inner":var b='<div id="alertBox" class="alertBox alertBox-inner">${msg}</div>'}var c=SUI.Use("HTMLTemplate",{string:b,para:{msg:a.msg}});a.render(c)},render:function(a){var b=this,c=document.querySelector("body");!document.querySelector(b.uid)&&c.insertAdjacentHTML("beforeend",a),"function"==typeof b.callBack&&b.callBack(),b.hasMask&&b.mask(c),b.setPos(document.querySelector(b.uid))},mask:function(a){var b=document.createElement("div");b.id="tempMask";var c=SUI.require("position").getHeight();a.appendChild(b),document.querySelector("#tempMask").style.cssText=";height:"+c+"px;width:"+document.documentElement.offsetWidth+"px;"},setPos:function(a){var b=this,c=SUI.require("position").scrollTop();return a.style.cssText=";top:"+(c+window.innerHeight/2-a.offsetHeight/2)+"px;left:"+(document.documentElement.offsetWidth/2-a.offsetWidth/2)+"px;display:block;","mini"==b.type?(document.querySelector("#tempMask").style.opacity=0,void setTimeout(function(){$("#tempMask").remove(),$("#alertBox").remove()},2e3)):void b.addEvent(a)},addEvent:function(a){var b=this;$(a.querySelector(".btn-confirm")).on("click",function(c){b.confirm(a),b.reset(a),c.preventDefault()}),"alert"!=b.type&&$(a.querySelector(".btn-cancel")).on("click",function(c){b.cancel(a),b.reset(a),c.preventDefault()})},reset:function(a){document.querySelector("#tempMask")&&SUI.require("remove").call(document.querySelector("#tempMask")),SUI.require("remove").call(a),"mini"!=this.type&&this.die(a)},die:function(a){$(a.querySelector(".btn-confirm")).off("click"),"alert"!=self.type&&$(a.querySelector(".btn-cancel")).off("click")}},new b(a).init()},SUI.UI.ProCounter=function(a){var b={uid:".sn-count",min:1,max:99};$.extend(b,a);var c=$(b.uid),d=c.find(".input-count"),e=c.find(".add"),f=c.find(".min"),g=isNaN(d.val())?parseInt(d.val()):b.min,h=b.min,i=b.max,j=SUI.require("checkDevice").isMobile()?"tap":"click";d.val(parseInt(d.val())>0?parseInt(d.val()):h),d.keyup(function(){g=$(this).val(),parseInt($(this).val())>i&&$(this).val(i),(isNaN($(this).val())||0==parseInt($(this).val())||parseInt($(this).val())<h)&&(this.value=this.value.replace(/\D/g,""),$(this).val(h),g=h)}),d.focus(function(){g=d.val(),this.type="number",d.val("")}),d.on("change keyup blur",function(){this.type="text"}),d.blur(function(){parseInt($(this).val())>i&&$(this).val(i),""==$(this).val()||parseInt($(this).val())<h?$(this).val(1):g>i?(g=i,$(this).val(i)):$(this).val(g)}),f.on(j,function(){g--,h>=g?(d.val(h),g=h):g>i&&(g=i),d.val(g)}),e.on(j,function(){g++,g>i&&(g=i),d.val(g)})},SUI.UI.timer=function(a){function b(a){this.opts=a||{},this.obj=this.opts.obj,this.nowTime=this.opts.nowTime,this.startTime=this.opts.startTime,this.endTime=this.opts.endTime,this.speed=this.opts.speed||1e3,this.startText=""==this.opts.startText?"":this.opts.startText||"即将开始：",this.endText=""==this.opts.endText?"":this.opts.endText||"距结束：",this.finishText=this.opts.finishText||"抢购已结束!"}b.prototype={init:function(){this.timer(),this.run()},timer:function(){var a=this,b=[],c=this.nowTime;a.startTime&&a.startTime>c?(b=a.parse(a.startTime-c),a.obj[0].innerHTML=this.startText+("00"==b[3]?"":b[3]+"天")+b[2]+"小时"+b[1]+"分"+b[0]+"秒"):a.endTime&&a.endTime>c?(b=a.parse(a.endTime-c),a.obj[0].innerHTML=this.endText+("00"==b[3]?"":b[3]+"天")+b[2]+"小时"+b[1]+"分"+b[0]+"秒"):a.obj[0].innerHTML=this.finishText,this.nowTime=parseInt(this.nowTime)+1e3},parse:function(a){var b=this,c=a/b.speed;return b.second=Math.floor(c%60),b.minute=Math.floor(c/60%60),b.hour=Math.floor(c/60/60%24),b.day=Math.floor(c/60/60/24),b.second<10&&(b.second="0"+b.second),b.minute<10&&(b.minute="0"+b.minute),b.hour<10&&(b.hour="0"+b.hour),b.day<10&&(b.day="0"+b.day),[b.second,b.minute,b.hour,b.day]},run:function(){var a=this;setInterval(function(){a.timer()},1e3)}},new b(a).init()},$(function(){SUI.Use("init")});