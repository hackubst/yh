$(function(){	var pids = $('#province_id').val();	if(pids != ''){		var item = $('#divisions input');		pids = pids.split(',');				for(var i in pids){			for(var j in item){				if(pids[i] == item.eq(j).val()){					item.eq(j).prop('checked', true);					continue;				}			}		}	}		$('#province_text').on('focus', popupLocation).on('keydown', registerESCKey);		$("#form1").validate({		rules: {			start_weight: {				required: true,				number: true			},			added_weight: {				required: true,				number: true			},			start_weight_price: {				required: true,				number: true			},			added_weight_price: {				required: true,				number: true			},			province_text: {				required: true			}		},		messages: {			start_weight: {				required: "请选择首重重量",				number: "请输入纯数值的首重重量"			},			added_weight: {				required: "请选择续重重量",				number: "请输入纯数值的续重重量"			},			start_weight_price: {				required: "请输入首重费用",				number: "请输入纯数值的首重费用"			},			added_weight_price: {				required: "请输入续重费用",				number: "请输入纯数值的续重费用"			},			province_text: {				required: "请选择配送区域"			}		},		errorPlacement: acp.form_ShowError,//显示出错信息(这段代码必须加)		success:acp.form_HideError//验证成功隐藏错误信息(这段代码必须加)	});});//获取选中的省市项地区码，地区名称function getDestByDivisions() {	var destCodes = new Array();	var destStrs = new Array();	var dest = new Array();		$('#divisions input:checked').each(function() {		destCodes.push($(this).val());		destStrs.push($(this).next().text());	});		dest['codes'] = destCodes;	dest['strs'] = destStrs;	return dest;}/** * 获取页面元素的坐标 */function getPosXY(a, offset) {	var p=offset?offset.slice(0):[0,0],tn;	while(a) {		tn=a.tagName.toUpperCase();		if (tn == "DIV" && a.id == "Content") break;		p[0]+=a.offsetLeft-(tn=="DIV"&&a.scrollLeft?a.scrollLeft:0);		p[1]+=a.offsetTop-(tn=="DIV"&&a.scrollTop?a.scrollTop:0);		if (tn=="BODY") break;		a=a.offsetParent;	}	return p;}function popupLocation(e) {	var loc = document.getElementById('location');	var target = e.target || e.srcElement;	var pos = getPosXY(target, [0, target.offsetHeight]);	loc.style.left = pos[0] + 'px';	loc.style.top = pos[1] + 'px';	loc.style.display = 'block';}function hideLocation() {	var loc = document.getElementById('location');	loc.style.display = 'none';}function registerESCKey(e) {	if (null != e && 27 == (e.keyCode || e.charCode || e.which)) {		hideLocation();	}	var target = e.target || e.srcElement;	target.blur();}//选择目的地后function doSelectLocation() {	//do select	var dest = getDestByDivisions();	//如果没有选择省市项则提示并且返回	if(null == dest['codes'] || 0 == dest['codes'].length) {		alert('请先选择地区项！');		return false;	}		$('#province_id').val(dest['codes'].join(','));	$('#province_text').text(dest['strs'].join('，'));	//do close	hideLocation();}